#!/bin/bash
# -polka-

# this is for setting up a workspace in tmux

# TARGET_DIR=$(fasd -d $@)

TARGET_NAME="$1"

if tmux ls | awk '{print $1}' | tr -d : | grep $TARGET_NAME &>-; then
	# session is available
	if [ -z $TMUX ]; then
		tmux attach -t "$TARGET_NAME"
	else
		TMUX=
		tmux switchc -t "$TARGET_NAME"
	fi
	exit
fi

# session isn't available
if [ -e "$TARGET_NAME" ]; then # is a dir path
	TARGET_DIR=$(dirname "$TARGET_NAME")
	TARGET_NAME=$(basename "$TARGET_NAME")
else # is a name
	TARGET_DIR=$HOME
fi

tmux new -d -s "$TARGET_NAME" -c "$TARGET_DIR"
